<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PDF 검증 시스템 | 개발자 대시보드</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      body {
        font-family: 'Pretendard', sans-serif;
      }
      .content-box {
        transition: all 0.3s ease;
      }
      .content-box:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      }
      .status-ok {
        color: #22c55e;
      }
      .status-improve {
        color: #f97316;
      }
      .status-critical {
        color: #ef4444;
      }
      th {
        text-align: left;
      }
      .flow-step {
        @apply text-center bg-white p-3 rounded-lg shadow-md border border-gray-200 w-full;
      }
      .flow-arrow {
        @apply text-gray-400 text-3xl font-light;
      }
      /* New styles for detailed flowchart */
      .flow-card {
        @apply bg-white rounded-lg shadow-lg border border-gray-200 p-4;
      }
      .flow-card-header {
        @apply text-lg font-bold text-indigo-700 border-b-2 border-indigo-200 pb-2 mb-3;
      }
      .flow-card-content {
        @apply text-sm text-gray-700 space-y-2;
      }
      .io-box {
        @apply bg-gray-100 border border-dashed border-gray-300 rounded p-2 text-xs;
      }
      .code-ref {
        @apply font-mono bg-gray-200 text-gray-600 px-1 rounded text-xs;
      }
      /* Styles for Architecture Diagram */
      .arch-layer {
        @apply p-4 rounded-lg border-2;
      }
      .arch-arrow {
        @apply text-gray-500 text-2xl font-semibold my-4 text-center;
      }
    </style>
  </head>
  <body class="bg-gray-100 text-gray-800">
    <div class="container mx-auto p-4 md:p-8">
      <!-- Header -->
      <header class="text-center mb-10">
        <h1 class="text-4xl font-bold text-gray-900">PDF 검증 시스템</h1>
        <p class="text-xl text-gray-600 mt-2">개발자 기술 대시보드 v7.0 (클린 아키텍처 적용)</p>
      </header>

      <!-- Main Process Flow -->
      <section class="mb-12">
        <h2 class="text-2xl font-bold border-b-2 border-indigo-500 pb-2 mb-6">
          핵심 처리 프로세스 (Core Process Flow)
        </h2>
        <div class="bg-gray-50 p-6 rounded-lg shadow-md content-box">
          <!-- CSS Grid Flowchart -->
          <div class="w-full max-w-4xl mx-auto">
            <div class="grid grid-cols-1 md:grid-cols-5 gap-y-2 justify-items-center">
              <div class="flow-step">
                <strong>1. 이미지화</strong><br /><span class="text-sm text-gray-600">PDF 페이지 렌더링</span>
              </div>
              <div class="flow-arrow hidden md:flex items-center justify-center">&#10140;</div>
              <div class="flow-arrow flex md:hidden items-center justify-center transform rotate-90">&#10140;</div>
              <div class="flow-step">
                <strong>2. 위치 보정</strong><br /><span class="text-sm text-gray-600">레이아웃 & 앵커</span>
              </div>
              <div class="flow-arrow hidden md:flex items-center justify-center">&#10140;</div>
              <div class="flow-arrow flex md:hidden items-center justify-center transform rotate-90">&#10140;</div>
              <div class="flow-step md:col-start-5">
                <strong>3. 이미지 가공</strong><br /><span class="text-sm text-gray-600">품질 개선 & 표준화</span>
              </div>
            </div>
            <div class="flex justify-center my-2"><div class="flow-arrow transform rotate-90">&#10140;</div></div>
            <div class="grid justify-items-center">
              <div class="flow-step bg-indigo-50 border-indigo-300 max-w-xs">
                <strong>4. 최종 분석</strong><br /><span class="text-sm text-gray-600">검증 방식 분기</span>
              </div>
            </div>
            <div class="h-8 w-full flex justify-center relative">
              <div class="w-px h-full bg-gray-300"></div>
              <div class="absolute bottom-0 left-0 w-full h-px">
                <div class="h-px bg-gray-300 w-1/2 md:w-2/5 float-left"></div>
                <div class="h-px bg-gray-300 w-1/2 md:w-2/5 float-right"></div>
              </div>
              <div class="absolute bottom-0 left-0 w-1/2 md:w-2/5 h-full">
                <div class="w-px h-full bg-gray-300 float-right"></div>
              </div>
              <div class="absolute bottom-0 right-0 w-1/2 md:w-2/5 h-full">
                <div class="w-px h-full bg-gray-300 float-left"></div>
              </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4">
              <div class="flex flex-col items-center text-center space-y-2">
                <div class="text-indigo-600 font-semibold">텍스트 영역</div>
                <div class="flow-step">
                  <strong>OCR 검증</strong><br /><span class="text-sm text-gray-600">텍스트 길이 분석</span>
                </div>
              </div>
              <div class="flex flex-col items-center text-center space-y-2">
                <div class="text-indigo-600 font-semibold">서명/체크 영역</div>
                <div class="flow-step">
                  <strong>Contour 검증</strong><br /><span class="text-sm text-gray-600">내용 채움 비율 분석</span>
                </div>
              </div>
            </div>
            <div class="h-8 w-full flex justify-center relative mt-4">
              <div class="absolute top-0 left-0 w-full h-px">
                <div class="h-px bg-gray-300 w-1/2 md:w-2/5 float-left"></div>
                <div class="h-px bg-gray-300 w-1/2 md:w-2/5 float-right"></div>
              </div>
              <div class="absolute top-0 left-0 w-1/2 md:w-2/5 h-full">
                <div class="w-px h-full bg-gray-300 float-right"></div>
              </div>
              <div class="absolute top-0 right-0 w-1/2 md:w-2/5 h-full">
                <div class="w-px h-full bg-gray-300 float-left"></div>
              </div>
              <div class="w-px h-full bg-gray-300"></div>
            </div>
            <div class="grid justify-items-center">
              <div class="flow-step bg-green-50 border-green-300 max-w-xs">
                <strong>5. 결과 생성</strong><br /><span class="text-sm text-gray-600"
                  >결과 종합 및 PDF 하이라이트</span
                >
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Detailed Code Flowchart -->
      <section class="mb-12">
        <h2 class="text-2xl font-bold border-b-2 border-indigo-500 pb-2 mb-6">
          상세 코드 흐름 도식화 (Detailed Code Flowchart)
        </h2>
        <div class="space-y-4">
          <!-- Step 1: Initialization -->
          <div class="flow-card">
            <div class="flow-card-header">1. 초기화 및 페이지 레벨 처리</div>
            <div class="flow-card-content">
              <p>
                검증 시작 시, <code class="code-ref">_validate_single_roi</code> 함수가 각 ROI에 대해 호출되며, 먼저
                페이지 전체를 분석합니다.
              </p>
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-start">
                <div class="io-box">
                  <strong>INPUT</strong><br />- 원본 PDF, 검증 PDF<br />- ROI 정보 (좌표, 앵커, 방식)
                </div>
                <div class="text-center md:mt-8"><span class="text-2xl text-gray-400">&#10140;</span></div>
                <div class="io-box">
                  <strong>PROCESS</strong><br />1. <code class="code-ref">_get_full_page_image</code>: 원본/검증
                  페이지를 고해상도 이미지로 변환<br />2. <code class="code-ref">DocumentLayoutDetector</code>: 두
                  페이지 이미지를 비교하여 기울기, 크기, 위치 차이 계산
                </div>
              </div>
              <div class="io-box mt-4">
                <strong>OUTPUT</strong><br />- <code class="code-ref">layout_offset</code> 객체 (e.g., `{offset_x: 2.5,
                scale_y: 0.98, ...}`)
              </div>
            </div>
          </div>
          <div class="flex justify-center text-4xl text-gray-400 my-2">&#11167;</div>
          <!-- Step 2: Geometric Correction -->
          <div class="flow-card">
            <div class="flow-card-header">2. ROI 좌표 보정</div>
            <div class="flow-card-content">
              <p>
                페이지 전체의 변형 값을 바탕으로 개별 ROI의 좌표를 정확하게 찾아냅니다. 앵커 유무에 따라 2단계로 정밀
                보정을 시도합니다.
              </p>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-3">
                  <p class="font-bold text-blue-800 text-center mb-2">앵커가 있는 경우 (정밀 보정)</p>
                  <ol class="list-decimal list-inside space-y-2">
                    <li>
                      <code class="code-ref">_apply_layout_correction</code>: 1단계의
                      <code class="code-ref">layout_offset</code>을 ROI 좌표에 1차 적용
                    </li>
                    <li>
                      <code class="code-ref">_find_anchor_template_matching</code>: 앵커 이미지로 위치 탐색 (1순위)
                    </li>
                    <li><code class="code-ref">_find_anchor_affine_robust</code>: 특징점 매칭으로 위치 탐색 (2순위)</li>
                    <li>탐색된 앵커 이동량만큼 ROI 좌표를 2차 미세 조정</li>
                  </ol>
                </div>
                <div class="bg-gray-50 border border-gray-200 rounded-lg p-3">
                  <p class="font-bold text-gray-800 text-center mb-2">앵커가 없는 경우 (기본 보정)</p>
                  <ol class="list-decimal list-inside space-y-2">
                    <li>
                      <code class="code-ref">_apply_layout_correction</code>: 1단계의
                      <code class="code-ref">layout_offset</code>을 ROI 좌표에 적용하는 것으로 보정 완료
                    </li>
                  </ol>
                </div>
              </div>
              <div class="io-box mt-4">
                <strong>OUTPUT</strong><br />- 최종 보정된 <code class="code-ref">new_coords</code> (ROI의 실제 위치
                좌표)
              </div>
            </div>
          </div>
          <div class="flex justify-center text-4xl text-gray-400 my-2">&#11167;</div>
          <!-- Step 3: Final Analysis -->
          <div class="flow-card">
            <div class="flow-card-header">3. 최종 분석 및 판정</div>
            <div class="flow-card-content">
              <p>
                보정된 최종 좌표(<code class="code-ref">new_coords</code>)를 이용해 검증 PDF에서 ROI 이미지를 추출하고,
                설정된 방식에 따라 분석을 수행합니다.
              </p>
              <div class="io-box">
                <strong>INPUT</strong><br />- 최종 보정된 <code class="code-ref">new_coords</code>
              </div>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                <div class="bg-green-50 border border-green-200 rounded-lg p-3">
                  <p class="font-bold text-green-800 text-center mb-2">IF method == "ocr"</p>
                  <ol class="list-decimal list-inside space-y-2">
                    <li><code class="code-ref">_extract_roi_image</code>: 최종 좌표로 ROI 이미지 추출</li>
                    <li>
                      <code class="code-ref">_enhanced_handwriting_ocr</code>: 다양한 전처리 기법 적용 (이진화, 노이즈
                      제거 등)
                    </li>
                    <li><code class="code-ref">pytesseract</code>: 이미지에서 텍스트 추출</li>
                    <li class="font-bold">결과: 텍스트 길이와 임계값 비교하여 `OK` 또는 `DEFICIENT` 판정</li>
                  </ol>
                </div>
                <div class="bg-orange-50 border border-orange-200 rounded-lg p-3">
                  <p class="font-bold text-orange-800 text-center mb-2">IF method == "contour"</p>
                  <ol class="list-decimal list-inside space-y-2">
                    <li><code class="code-ref">_extract_roi_image</code>: 최종 좌표로 ROI 이미지 추출</li>
                    <li>(개선안) 이진화 후 검은 픽셀(내용)의 비율 계산</li>
                    <li>(기존) 원본과 차이 계산 후 `cv2.findContours` 실행</li>
                    <li class="font-bold">
                      결과: 내용 비율(또는 Contour 면적)과 임계값 비교하여 `OK` 또는 `DEFICIENT` 판정
                    </li>
                  </ol>
                </div>
              </div>
            </div>
          </div>
          <div class="flex justify-center text-4xl text-gray-400 my-2">&#11167;</div>
          <!-- Step 4: Output Generation -->
          <div class="flow-card">
            <div class="flow-card-header">4. 결과 종합 및 출력</div>
            <div class="flow-card-content">
              <p>모든 ROI의 검증 결과를 종합하여 최종 결과물을 생성합니다.</p>
              <div class="io-box">
                <strong>INPUT</strong><br />- 모든 ROI의 검증 결과 리스트 (e.g., `[{'field_name': '서명', 'status':
                'DEFICIENT', ...}]`)
              </div>
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-start mt-4">
                <div class="io-box col-span-2">
                  <strong>PROCESS</strong><br />1. <code class="code-ref">create_annotated_pdf</code>: 검증 PDF 파일을
                  불러옴<br />2. `DEFICIENT` 또는 `ERROR` 상태인 결과에 대해 `page.add_highlight_annot`를 사용하여 해당
                  좌표에 하이라이트 추가
                </div>
                <div class="text-center md:mt-8"><span class="text-2xl text-gray-400">&#10140;</span></div>
                <div class="io-box bg-green-100 border-green-300">
                  <strong>FINAL OUTPUT</strong><br />- <code class="code-ref">review_... .pdf</code><br />
                  (미흡 항목이 하이라이트된 최종 결과 PDF 파일)
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Technology Checklist -->
      <section class="mb-12">
        <h2 class="text-2xl font-bold border-b-2 border-indigo-500 pb-2 mb-6">영역별 기술 체크리스트</h2>
        <!-- Checklist Tables -->
        <div class="bg-white p-6 rounded-lg shadow-md mb-8 content-box">
          <h3 class="text-xl font-semibold mb-4">1. 기하학적 보정 (Geometric Correction) - 위치 정확도</h3>
          <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200">
              <thead class="bg-gray-50">
                <tr>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    필수 항목
                  </th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    핵심 역할 및 목적
                  </th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    현재 적용 상태
                  </th>
                </tr>
              </thead>
              <tbody class="bg-white divide-y divide-gray-200">
                <tr>
                  <td class="px-6 py-4 whitespace-nowrap font-medium">레이아웃 감지</td>
                  <td class="px-6 py-4">
                    문서 전체의 기울기, 크기, 여백 차이를 감지하여 1차적으로 좌표를 바로잡음 (강건성 확보)
                  </td>
                  <td class="px-6 py-4">
                    <span class="font-bold status-ok">✅ 적용 완료</span><br /><span class="text-sm text-gray-600"
                      >DocumentLayoutDetector 클래스</span
                    >
                  </td>
                </tr>
                <tr>
                  <td class="px-6 py-4 whitespace-nowrap font-medium">앵커 기반 정밀 보정</td>
                  <td class="px-6 py-4">
                    ROI 주변의 고유한 표식(앵커)을 기준으로 2차 정밀 보정을 수행하여 왜곡까지 대응 (정확도 극대화)
                  </td>
                  <td class="px-6 py-4">
                    <span class="font-bold status-ok">✅ 적용 완료</span><br /><span class="text-sm text-gray-600"
                      >템플릿/특징점 매칭 Fallback 적용</span
                    >
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="bg-white p-6 rounded-lg shadow-md mb-8 content-box">
          <h3 class="text-xl font-semibold mb-4">2. 이미지 전처리 (Image Preprocessing) - 분석 품질</h3>
          <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200">
              <thead class="bg-gray-50">
                <tr>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    필수 항목
                  </th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    핵심 역할 및 목적
                  </th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    현재 적용 상태 및 개선 방향
                  </th>
                </tr>
              </thead>
              <tbody class="bg-white divide-y divide-gray-200">
                <tr>
                  <td class="px-6 py-4 whitespace-nowrap font-medium">고해상도 렌더링</td>
                  <td class="px-6 py-4">
                    PDF를 이미지로 변환 시, OCR에 최적화된 300 DPI 이상의 해상도를 보장하여 인식률을 높임
                  </td>
                  <td class="px-6 py-4">
                    <span class="font-bold status-improve">🟡 개선 필요</span><br /><span class="text-sm text-gray-600"
                      >현재 `scale=2.0` 사용 중. `dpi=300` 옵션으로 변경 시 OCR 성능 극대화 예상.</span
                    >
                  </td>
                </tr>
                <tr>
                  <td class="px-6 py-4 whitespace-nowrap font-medium">적응형 이진화</td>
                  <td class="px-6 py-4">
                    이미지를 완벽한 흑/백으로 분리하여 배경 노이즈(그림자, 얼룩)를 제거하고 내용을 명확히 함
                  </td>
                  <td class="px-6 py-4">
                    <span class="font-bold status-ok">✅ 적용 완료</span><br /><span class="text-sm text-gray-600"
                      >`cv2.adaptiveThreshold` 다수 활용</span
                    >
                  </td>
                </tr>
                <tr>
                  <td class="px-6 py-4 whitespace-nowrap font-medium">다중 OCR 전처리</td>
                  <td class="px-6 py-4">
                    손글씨처럼 인식이 어려운 경우, 여러 전처리(대비강화, 모폴로지, 노이즈제거)를 자동으로 시도하여
                    최상의 결과를 선택
                  </td>
                  <td class="px-6 py-4">
                    <span class="font-bold status-ok">✅ 적용 완료</span><br /><span class="text-sm text-gray-600"
                      >`_enhanced_handwriting_ocr` 함수</span
                    >
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="bg-white p-6 rounded-lg shadow-md mb-8 content-box">
          <h3 class="text-xl font-semibold mb-4">3. 핵심 검증 로직 (Core Validation Logic) - 최종 판정</h3>
          <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200">
              <thead class="bg-gray-50">
                <tr>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    필수 항목
                  </th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    핵심 역할 및 목적
                  </th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    현재 적용 상태 및 개선 방향
                  </th>
                </tr>
              </thead>
              <tbody class="bg-white divide-y divide-gray-200">
                <tr>
                  <td class="px-6 py-4 whitespace-nowrap font-medium">OCR 텍스트 검증</td>
                  <td class="px-6 py-4">
                    이미지에서 추출한 텍스트의 길이가 설정된 임계값을 넘는지 검사 (내용 충분성 판정)
                  </td>
                  <td class="px-6 py-4">
                    <span class="font-bold status-ok">✅ 적용 완료</span><br /><span class="text-sm text-gray-600"
                      >고해상도 렌더링 적용 시 성능 향상 기대.</span
                    >
                  </td>
                </tr>
                <tr>
                  <td class="px-6 py-4 whitespace-nowrap font-medium">Contour 서명/체크 검증</td>
                  <td class="px-6 py-4">원본과의 차이 이미지를 분석하여 내용(서명, 체크)의 유무를 판정</td>
                  <td class="px-6 py-4">
                    <span class="font-bold status-critical">❗️ 핵심 개선 필요</span><br /><span
                      class="text-sm text-gray-600"
                      >현재 로직은 빈 체크박스를 통과시킬 수 있음. **'픽셀 채움 비율(Pixel Density)'** 분석 방식으로
                      전환 시 문제 해결 가능.</span
                    >
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- UPDATED SECTION: Software Architecture -->
      <section class="mb-12">
        <h2 class="text-2xl font-bold border-b-2 border-indigo-500 pb-2 mb-6">
          소프트웨어 아키텍처 (Clean Architecture)
        </h2>
        <div class="bg-gray-50 p-6 rounded-lg shadow-md content-box">
          <p class="mb-6 text-gray-700">
            본 프로젝트는 클린 아키텍처 원칙을 따라 각 계층의 역할을 명확히 분리하여, 유지보수성과 테스트 용이성을
            극대화합니다. 데이터와 요청은 바깥 계층에서 안쪽 계층으로 흐릅니다.
          </p>

          <div class="flex flex-col space-y-2">
            <!-- 1. Presentation Layer -->
            <div class="arch-layer border-blue-300 bg-blue-50">
              <h3 class="font-bold text-blue-800">1. Presentation Layer (View)</h3>
              <p class="text-sm mt-1">
                사용자와 직접 소통하는 최상위 계층입니다. 사용자의 입력을 받고 처리 결과를 화면에 표시합니다.
              </p>
              <ul class="text-xs list-disc list-inside mt-2 pl-2">
                <li><span class="font-semibold">역할:</span> UI 렌더링, 사용자 이벤트 감지 및 컨트롤러로 전달</li>
                <li>
                  <span class="font-semibold">해당 코드:</span> <code class="code-ref">app/gui/</code> 폴더 (e.g.,
                  <code class="code-ref">main_window.py</code>)
                </li>
              </ul>
            </div>

            <div class="arch-arrow">
              &#11167; <span class="text-sm ml-2">사용자 요청 (e.g., '검증 시작' 버튼 클릭)</span>
            </div>

            <!-- 2. Application Layer -->
            <div class="arch-layer border-purple-300 bg-purple-50">
              <h3 class="font-bold text-purple-800">2. Application Layer (Controller)</h3>
              <p class="text-sm mt-1">
                어떤 작업을 수행할지 결정하고 조정하는 '오케스트라 지휘자' 역할을 합니다. 비즈니스 로직을 직접 포함하지
                않습니다.
              </p>
              <ul class="text-xs list-disc list-inside mt-2 pl-2">
                <li>
                  <span class="font-semibold">역할:</span> GUI의 요청을 받아 필요한 Service를 호출하고, 데이터 흐름을
                  제어
                </li>
                <li>
                  <span class="font-semibold">해당 코드:</span> <code class="code-ref">app/controllers/</code> 폴더
                  (e.g., <code class="code-ref">validation_controller.py</code>)
                </li>
              </ul>
            </div>

            <div class="arch-arrow">&#11167; <span class="text-sm ml-2">비즈니스 로직 실행 요청</span></div>

            <!-- 3. Domain Layer -->
            <div class="arch-layer border-green-300 bg-green-50">
              <h3 class="font-bold text-green-800">3. Domain Layer (Service, Entity, Repository Interface)</h3>
              <p class="text-sm mt-1">
                시스템의 심장부입니다. 모든 핵심 비즈니스 규칙과 데이터 구조(Entity)가 정의되며, 외부 계층에 의존하지
                않습니다.
              </p>
              <ul class="text-xs list-disc list-inside mt-2 pl-2">
                <li>
                  <span class="font-semibold">Service (Use Case):</span> 실제 비즈니스 로직(검증, 템플릿 생성 등)을
                  수행. <code class="code-ref">domain/services/</code>
                </li>
                <li>
                  <span class="font-semibold">Entity:</span> 핵심 데이터 객체 정의 (e.g., Template, ROI).
                  <code class="code-ref">domain/entities/</code>
                </li>
                <li>
                  <span class="font-semibold">Repository Interface:</span> 데이터 저장/조회 방식에 대한 '규칙(추상
                  클래스)'만 정의. <code class="code-ref">domain/repositories/</code>
                </li>
              </ul>
            </div>

            <div class="arch-arrow">&#11167; <span class="text-sm ml-2">데이터 저장/조회 (Interface 호출)</span></div>

            <!-- 4. Infrastructure Layer -->
            <div class="arch-layer border-gray-300 bg-gray-50">
              <h3 class="font-bold text-gray-800">4. Infrastructure Layer (Frameworks, Drivers)</h3>
              <p class="text-sm mt-1">
                외부 세계와 소통하는 모든 기술적인 세부 구현을 담당합니다. 데이터베이스, 파일 시스템, 외부 라이브러리
                등이 여기에 속합니다.
              </p>
              <ul class="text-xs list-disc list-inside mt-2 pl-2">
                <li>
                  <span class="font-semibold">역할:</span> Repository Interface의 실제 구현, 외부 라이브러리(OpenCV,
                  PyMuPDF) 연동, 설정 관리
                </li>
                <li>
                  <span class="font-semibold">해당 코드:</span> <code class="code-ref">infrastructure/</code> 폴더
                  (e.g., <code class="code-ref">json_template_repository.py</code>, 이미지 처리 모듈)
                </li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- Footer -->
      <footer class="text-center mt-12 pt-6 border-t border-gray-300">
        <p class="text-sm text-gray-500">PDF Document Validator Project | 최종 업데이트: 2025-09-04</p>
      </footer>
    </div>
  </body>
</html>
